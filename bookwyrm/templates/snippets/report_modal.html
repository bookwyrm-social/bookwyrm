{% extends 'components/modal.html' %}
{% load i18n %}
{% load utilities %}
{% load humanize %}

{% block modal-title %}
{% if status %}
{% blocktrans with username=reported_user|username %}Report @{{ username }}'s status{% endblocktrans %}
{% elif link %}
{% blocktrans with domain=link.domain.domain %}Report {{ domain }} link{% endblocktrans %}
{% else %}
{% blocktrans with username=reported_user|username %}Report @{{ username }}{% endblocktrans %}
{%  endif %}
{% endblock %}

{% block modal-form-open %}
<form name="report" method="post" action="{% url 'report' %}">
{% endblock %}

{% block modal-body %}

{% csrf_token %}
<input type="hidden" name="user" value="{{ request.user.id }}">
<input type="hidden" name="reported_user" value="{{ reported_user.id }}">
{% if status_id %}
<input type="hidden" name="statuses" value="{{ status_id }}">
{% endif %}
{% if link %}
<input type="hidden" name="links" value="{{ link.id }}">
{% endif %}

<section class="content">
    <p class="notification">
        {% blocktrans with site_name=site.name %}This report will be sent to {{ site_name }}'s moderators for review.{% endblocktrans %}
        {% if link %}
            {% trans "Links from this domain will be removed until your report has been reviewed." %}
        {% endif %}
    </p>
    {% if not reported_user.local %}
    <label class="checkbox label">
        <input class="checkbox" id="id_allow_broadcast" type="checkbox" name="allow_broadcast" checked>
        {% trans "Also send this report to the user's instance admins" %}
    </label>
    {% else %}
        <input type="hidden" name="allow_broadcast">
    {% endif %}
    <div class="control">
        <label class="label" for="id_{{ controls_uid }}_report_note">
            {% trans "More info about this report:" %}
        </label>
        <textarea class="textarea" name="note" id="id_{{ controls_uid }}_report_note"></textarea>
    </div>
</section>

{% endblock %}


{% block modal-footer %}
<div class="buttons is-right is-flex-grow-1">
    <button type="button" class="button" data-modal-close>{% trans "Cancel" %}</button>
    <button class="button is-success" type="submit">{% trans "Submit" %}</button>
</div>
{% endblock %}

{% block modal-form-close %}</form>{% endblock %}

