{% load notification_page_tags %}
{% related_status notification as related_status %}
<div class="notification {% if notification.id in unread %}has-background-primary{% endif %}">
    <div class="columns is-mobile {% if notification.id in unread %}has-text-white{% else %}has-text-more-muted{% endif %}">
        <div class="column is-narrow is-size-3">
            <a class="icon" href="{% block primary_link %}{% endblock %}">
                {% block icon %}{% endblock %}
            </a>
        </div>

        <div class="column is-clipped">
            <div class="block content">
                <p>
                    {% if notification.related_user %}
                        <a href="{{ notification.related_user.local_path }}">{% include 'snippets/avatar.html' with user=notification.related_user %}
                            {{ notification.related_user.display_name }}</a>
                    {% endif %}
                    {% block description %}{% endblock %}
                </p>
            </div>

            {% if related_status %}
            <div class="block">
                {% block preview %}{% endblock %}
            </div>
            {% endif %}
        </div>
    </div>
</div>

